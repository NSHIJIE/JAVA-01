学习笔记

大纲：

    字节码
        javap -c vebose xxx.class 查看class文件字节码详细信息
    类加载
        类加载生命周期和过程：
            七个过程：
            加载、校验、准备、解析、初始化、使用、卸载
        类加载时机：
            new object时会加载类
            虚拟机启动时加载，启动执行包含main方法类
            对类进行反射调用
            调用静态方法指令时，初始化静态方法所在的类
            访问静态字段指令时，初始化静态字段所在的类
            子类的初始化，会触发父类的初始化
            接口定义defalut方法时，实现该接口的类被初始化时，也会触发该接口类初始化
            初次调用MethodHandle实例时，初始化 MethodHandle指向的方法所在的类
        类加载器种类：
            启动类加载器
            扩展类加载器
            app类加载器 也可以自定义类加载器。
            加载特点：   
                双亲委派机制
                依赖加载
                缓存加载
    jvm参数与工具
        jps/jinfo、jstat、jstack、jmap、jjs等。
        自带工具jconsle、jmc、jvisualvm、VisualGC
        调优参数：Xmx、Xms、Xmn、Xss、
    gc算法、gc回收器
    算法：
        标记清理算法：
            特点：在标记、清理两个阶段效率较慢、空间上产生不连续碎片
        标记整理算法：
            特点：将存活的对象移动到一边，直接清楚端边界意外的空间，不产生空间碎片，清理后，空间连续
        复制算法：
            特点：主要发生在young区，Eden和其中一块Survivor区，在回收时，将存活的对象复制到其中一个Survior区，清理Eden和其中一块suvior区。
            只要移动堆顶指针就行，效率高。未发生回收时，会有块区域用不上。
        分代算法：
            将java堆分为 新生代和老年代 ，根据各个年代的特点，采用适当的收集算法。
    垃圾回收器：
        并行回收器：
            STW时间长，cpu使用率高。单核cpu比较有用
        串行回收器：
            jdk1.8默认回收器。默认值为cpu核心数。吞吐量高
        CMS回收器：
            为解决老年代回收STW时间较长的问题。对老年代不进行整理，使用空闲空间列表来解决空间管理问题。
            标记清除时，并发标记执行。
            并发标记，会占用一部分线程，导致应用程序变慢，吞吐量降低
        G1回收器：
            JDK 9以及JDK 9+推荐使用。
            G1不再坚持固定大小以及固定数量的分代区域划分，而是把连续的Java堆划分为多个大小相等的独立区域（Region）
            STW时长可以预估。
        ZGC回收器：
            并发执行，线性扩展
        ShennandoahGC   
            类似ZGC



吞吐量计算公示： 运行用户代码时间/（运行用户代码时间+垃圾回收时间）

